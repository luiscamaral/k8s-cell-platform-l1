# MinIO Helm Values
# Chart: minio/minio
# Docs: https://github.com/minio/minio/tree/master/helm/minio

# Deployment mode
mode: standalone  # standalone or distributed

# Root credentials
# IMPORTANT: Change these in production!
# Consider using existingSecret for production
rootUser: admin
rootPassword: "minio-secret-key-change-me"

# Alternatively, use an existing secret:
# existingSecret: minio-credentials

# Persistence
persistence:
  enabled: true
  storageClass: "nfs-client"
  accessMode: ReadWriteOnce
  size: 50Gi

# Resources
resources:
  requests:
    memory: 512Mi
    cpu: 250m
  limits:
    memory: 1Gi
    cpu: 500m

# Service configuration
service:
  type: ClusterIP
  port: 9000

# Console service
consoleService:
  type: ClusterIP
  port: 9001

# Ingress for API
ingress:
  enabled: true
  ingressClassName: nginx
  annotations:
    cert-manager.io/cluster-issuer: "internal-ca"
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/proxy-buffering: "off"
  hosts:
    - minio.lab.home
  tls:
    - secretName: minio-tls
      hosts:
        - minio.lab.home

# Console Ingress
consoleIngress:
  enabled: true
  ingressClassName: nginx
  annotations:
    cert-manager.io/cluster-issuer: "internal-ca"
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/proxy-buffering: "off"
  hosts:
    - minio-console.lab.home
  tls:
    - secretName: minio-console-tls
      hosts:
        - minio-console.lab.home

# Pre-create buckets on startup
buckets:
  - name: harbor-registry
    policy: none
    purge: false
  - name: velero-backups
    policy: none
    purge: false
  - name: loki-chunks
    policy: none
    purge: false
  - name: tempo-traces
    policy: none
    purge: false

# Service accounts for applications
# svcaccts:
#   - accessKey: harbor-access-key
#     secretKey: harbor-secret-key
#     user: harbor
#     policy:
#       statements:
#         - resources: ["arn:aws:s3:::harbor-registry/*"]
#           actions: ["s3:*"]

# Metrics for Prometheus (L4)
metrics:
  serviceMonitor:
    enabled: false  # Enable when Prometheus is deployed
    # additionalLabels:
    #   release: prometheus

# Pod settings
podAnnotations: {}

# Node selector (optional)
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity rules
affinity: {}

# Environment variables
environment:
  # Required for console
  MINIO_BROWSER_REDIRECT_URL: "https://minio-console.lab.home"
